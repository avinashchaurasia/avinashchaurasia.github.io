<!DOCTYPE html>
<html>
	<head>
        
        <!-- Include meta tag to ensure proper rendering and touch zooming -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">        
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        
        <script>            
            var x = document.getElementById("content");
            var loc = "";
            getLocation();
            function jsFunction(){
                var myselect = document.getElementById("selectOpt");
                
                $("#content").empty();
                
                var url = "https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=" +  loc+"&radius=500&keyword="+myselect.options[myselect.selectedIndex].value+"&key=AIzaSyDamwukThA0LymfPgknEzau6AbjIUZFWDs";
                $("#content").append("<table class=\"table\"><tbody>");
                
                $.getJSON(url, function(data){
                    for(i = 0; i < data.results.length; i++) {
                        $("#content").append("<tr>"+data.results[i].name+"</tr>")
                    }
                });
                
                $("#content").append("</tbody></table>");
                                
            }

            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(getInformation);
                } else { 
                    x.innerHTML = "Geolocation is not supported by this browser.";
                }
            }

            function getInformation(position) {
                loc = position.coords.latitude +","+position.coords.longitude; 
            }
        </script>
        
    </head>
	<body>
        <!---
          ---
                TABS -- common for all pages
          ---
         --->
        <ul class="nav nav-tabs">
            <li role="presentation" class="active">
                <a href="place.html">Places</a>
            </li>
            <li role="presentation">
                <a href="map.html">Map</a>
            </li>
            <li role="presentation">
                <a href="comments.html">Comments</a>
            </li>
        </ul>
        <!---
          ---
                Dropdown menu for selecting place type
          ---
         --->
        
        <select onChange="jsFunction()" id="selectOpt" class="form-control">
            <option value="none">None</option>
            <option value="sanctuaries">Sanctuaries</option>
            <option value="restaurant">Restaurant</option>
            <option value="hotel">Hotel</option>
            <option value="museum">Museum</option>
            <option value="monument">Monument</option>
            <option value="bus station">Bus Station</option>
            <option value="railway station">Railway Station</option>
            <option value="atm">ATM</option>
        </select>
        
        <p id="content"></p>
	
    </body>
<html>